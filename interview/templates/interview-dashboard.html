{% extends 'interview-student-base.html' %}
{% load static %}
{% block head %}
  <title>Dashboard</title>
  <link rel="stylesheet" type="text/css" href="{% static 'css/styles.css' %}">
{% endblock %}
{% block body %}
<div class='interview-dashboard'>
    <div class="row">
        <div class="col-md-5 clock-container">
            <div class="clock">
                <div class="hand hour-hand"></div>
                <div class="hand minute-hand"></div>
                <div class="hand second-hand"></div>
            </div>
        </div>
        
        <div class="col-md-7 greeting-container">
            <span class="greeting">{{time_greeting}}, Madam</span>
            <div class="row">
                <!-- <div class='col-md-3 it-is'><p>It is</p></div> -->
                <!-- <div class='col-md-9 day-of-week'><span style="color: #e1e1e1">It is </span>{{day_of_week}}</div> -->
            </div>  
        </div>
    </div>
    <hr/>
    <div class="row second-row">
        <div class="col-md-3 countdown-box">
            <div id="countdown" class="countdown">
                <p>Next class:</p>
                <span id="days">0</span> : <span id="hours">0</span> : <span id="minutes">0</span> : <span id="seconds">0</span>
            </div>
        </div>
        <div id="statusBox" class="col-md-3 status-box default">
            <a href="#" class="status">
                <span id="statusText">No class soon</span>
            </a>
        </div>
        <div class="col-md-6 video-box">
            <!-- <img id="thumbnail" class="video-thumbnail" src="https://via.placeholder.com/720"> -->
        </div>
    </div>
    <div class="row third-row">
        <table class="tasks-table">
            <thead>
                <tr>
                    <th>Task</th>
                    <th>Source</th>
                    <th>Estimated Time</th>
                    <th>Done</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Interview practise</td>
                    <td>Tutor</td>
                    <td>3 hours</td>
                    <td><input type="checkbox" class="task-done"></td>
                    
                </tr>
                <tr>
                    <td>Interview practise</td>
                    <td>Self</td>
                    <td>1 hours</td>
                    <td><input type="checkbox" class="task-done"></td>
                </tr>
                <!-- Add more rows as necessary -->
            </tbody>
        </table>
    </div>
    
</div>

<script>
    function setDate() {
        const now = new Date();
      
        const seconds = now.getSeconds();
        const secondsDegrees = ((seconds / 60) * 360) + 90;
        document.querySelector('.second-hand').style.transform = `rotate(${secondsDegrees}deg)`;
      
        const mins = now.getMinutes();
        const minsDegrees = ((mins / 60) * 360) + ((seconds/60)*6) + 90;
        document.querySelector('.minute-hand').style.transform = `rotate(${minsDegrees}deg)`;
      
        const hour = now.getHours();
        const hourDegrees = ((hour / 12) * 360) + ((mins/60)*30) + 90;
        document.querySelector('.hour-hand').style.transform = `rotate(${hourDegrees}deg)`;
      }
      
      setInterval(setDate, 1000);
      
      setDate();
</script>
<script>
    // Countdown
    function updateCountdown() {
        // Replace this with your own logic
        const targetTime = new Date('2023-12-31T00:00:00');
        const currentTime = new Date();

        const timeRemaining = targetTime - currentTime; // Time remaining in milliseconds

        const seconds = Math.floor((timeRemaining / 1000) % 60);
        const minutes = Math.floor((timeRemaining / 1000 / 60) % 60);
        const hours = Math.floor((timeRemaining / (1000 * 60 * 60)) % 24);
        const days = Math.floor(timeRemaining / (1000 * 60 * 60 * 24));

        document.querySelector('#days').innerText = days;
        document.querySelector('#hours').innerText = hours;
        document.querySelector('#minutes').innerText = minutes;
        document.querySelector('#seconds').innerText = seconds;
    }

    setInterval(updateCountdown, 1000);

    // Status Box
    function updateStatus() {
        // Replace this with your own logic
        const statusBox = document.querySelector('#statusBox');
        const statusText = document.querySelector('#statusText');
        const currentTime = new Date();
        const classStartTime = new Date('2023-05-20T10:00:00');
        const classEndTime = new Date('2023-05-20T11:00:00');

        if (currentTime >= classStartTime && currentTime <= classEndTime) {
            statusBox.classList.remove('default', 'upcoming');
            statusBox.classList.add('ongoing');
            statusText.innerText = 'Ongoing';
        } else if (currentTime < classStartTime && (classStartTime - currentTime) <= 3600000) { // Less than 1 hour until class
            statusBox.classList.remove('default', 'ongoing');
            statusBox.classList.add('upcoming');
            statusText.innerText = 'Starting soon';
        } else {
            statusBox.classList.remove('ongoing', 'upcoming');
            statusBox.classList.add('default');
            statusText.innerText = 'No class soon';
        }
    }

    setInterval(updateStatus, 1000);

    // Video Thumbnail
    function updateVideoThumbnail() {
        // Replace this with your own logic
        const thumbnail = document.querySelector('#thumbnail');
        thumbnail.src = "{% static 'img/new_thumbnail.jpg' %}"; // Update with the new thumbnail source
    }
</script>
{% endblock %}

{% block page-overlay %}

<div class='class-begun-overlay'>
    <i class="fa fa-times" aria-hidden="true"></i>
    <h2>Class Has Begun</h2>
    <br/>
    <div class="row">
        <div class = "col-md-6 left">
            <div class="time-remaining-clock">
                <p><span class="hours">
                    2
                </span>
                hours  
                <span class="minutes">
                    3
                </span>
                minutes
                </p>
                <p class="time-left-instr">left until class ends.</p>
            </div>
        </div>
        <div class = "col-md-6 right">
            <div class="action-button join-button">
                <p><span>Join Here </span> <i class="fa fa-laptop" aria-hidden="true"></i></p>
            </div>
            <div class="action-button discord-button">
                <p><span>Live Updates </span> <i class="fa-brands fa-discord" aria-hidden="true"></i></p>
            </div>
        </div>
    </div>
</div>


{% endblock %}